# 🔐 API密钥安全使用提醒

## ⚠️ 重要安全警告

您的项目目前配置为**前端直接调用AI服务**,这意味着:

### 🚨 安全风险
1. **API密钥暴露**: 密钥会被打包到前端代码中
2. **密钥泄露风险**: 任何人都可以通过浏览器开发者工具查看密钥
3. **费用风险**: 密钥可能被滥用,产生意外费用

### ✅ 允许的使用场景
- ✅ **本地开发**: 在本地开发环境使用
- ✅ **个人使用**: 仅个人使用,不分享给他人
- ✅ **Electron应用**: 打包成桌面应用后使用
- ✅ **内网部署**: 在受控的内网环境中使用

### ❌ 禁止的使用场景
- ❌ **公网部署**: 绝对不能部署到公网服务器
- ❌ **分享给他人**: 不要将包含密钥的代码分享给他人
- ❌ **提交到公开仓库**: 确保`.env`文件在`.gitignore`中

## 🔒 安全建议

### 1. 短期解决方案 (当前方案)
继续使用当前的配置,但要注意:
- 不要将代码部署到公网
- 不要分享包含密钥的代码
- 定期更换API密钥

### 2. 长期解决方案 (推荐)
实施后端代理架构,这是最安全的方案:

```typescript
// 前端代码 (安全)
const result = await fetch('/api/v2/ai/generate', {
  method: 'POST',
  body: JSON.stringify({ prompt: '...' })
});

// 后端代码 (安全)
const response = await anthropic.messages.create({
  // 密钥在后端,不暴露给前端
});
```

**优势**:
- ✅ API密钥完全不暴露
- ✅ 可以添加使用限额和监控
- ✅ 可以安全地部署到公网
- ✅ 可以添加用户认证和授权

## 📋 检查清单

在部署前,请确认:

- [ ] 我了解当前配置的安全风险
- [ ] 我只在个人/内网环境使用
- [ ] 我不会将代码部署到公网
- [ ] `.env`文件已添加到`.gitignore`
- [ ] 我已了解后端代理方案的优势

## 🛠️ 实施后端代理 (如需安全方案)

如果您需要实施后端代理方案,请参考以下步骤:

1. 创建后端API端点: `/api/v2/ai/generate`
2. 在后端服务器中调用AI服务
3. 前端通过代理端点调用AI服务
4. 添加认证和授权机制

参考项目中的 `services/aiProxyService.ts` 文件,这是已经实现好的代理服务。

---

**最后更新**: 2026-02-01
**配置状态**: 前端直接调用 (个人使用)
**推荐操作**: 了解风险,谨慎使用
